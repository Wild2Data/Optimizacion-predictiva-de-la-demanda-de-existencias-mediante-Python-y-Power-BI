# ðŸ Modelado Predictivo de Inventario con Python  
**Proyecto: Atlantic Flow Surf**

##  DescripciÃ³n general

Este mÃ³dulo contiene el desarrollo en **Python** del modelo predictivo de quiebres de stock para el proyecto **Atlantic Flow Surf**.  
El objetivo es **anticipar quiebres de inventario** utilizando datos histÃ³ricos de ventas, stock y contexto operativo, y **simular decisiones de reposiciÃ³n** considerando costos y logÃ­stica real.

El enfoque va mÃ¡s allÃ¡ de la predicciÃ³n: se evalÃºan **polÃ­ticas operativas** mediante simulaciÃ³n para apoyar la **toma de decisiones de negocio**.

---

##  Objetivo del mÃ³dulo

- Conectar Python con un **Data Warehouse en SQL Server**
- Preparar un dataset **ML-ready**
- Entrenar un modelo de **clasificaciÃ³n supervisada**
- Predecir **quiebres futuros de stock**
- Simular decisiones de reposiciÃ³n segÃºn:
  - probabilidad de quiebre
  - costos operativos
  - tipo de sucursal y lead time logÃ­stico

---

##  Flujo del proyecto en Python

1. **ExtracciÃ³n de datos**
   - ConexiÃ³n a SQL Server
   - Carga desde `vw_dataset_prediccion`

2. **Feature Engineering**
   - Variables temporales (lags)
   - Ratios ventas / stock
   - Contexto logÃ­stico (lead time)
   - ConstrucciÃ³n del target `quiebre_futuro`

3. **Modelado Predictivo**
   - Random Forest Classifier
   - ValidaciÃ³n con `TimeSeriesSplit`
   - EvaluaciÃ³n con mÃ©tricas de clasificaciÃ³n

4. **SimulaciÃ³n de decisiones**
   - Umbrales de reposiciÃ³n (0.3 / 0.4 / 0.5)
   - CÃ¡lculo de costos:
     - quiebres reales
     - falsas alarmas
   - SelecciÃ³n de polÃ­tica Ã³ptima

5. **AnÃ¡lisis por tipo de sucursal**
   - Urbana vs TurÃ­stica
   - Ajuste operativo segÃºn logÃ­stica

---

##  Variables clave del modelo

###  Target
- **`quiebre_futuro`**  
  Indica si ocurrirÃ¡ al menos un quiebre de stock dentro de una ventana futura, considerando el lead time logÃ­stico.

### ðŸ”§ Features principales
- `ventas_lag_1` â†’ tendencia de demanda
- `ratio_ventas_stock` â†’ presiÃ³n de consumo
- `stock_disponible` â†’ nivel actual
- `lead_time_dias` â†’ contexto logÃ­stico

---

##  Modelo utilizado

- **Algoritmo:** Random Forest Classifier  
- **Motivo:**  
  - Maneja relaciones no lineales  
  - Robusto ante ruido  
  - FÃ¡cil de interpretar mediante importancias

- **ValidaciÃ³n:**  
  - TimeSeriesSplit (respeta el orden temporal)

---

##  SimulaciÃ³n de reposiciÃ³n

El modelo no se usa solo para predecir, sino para **simular decisiones reales**:

- Si `prob_quiebre â‰¥ umbral` â†’ reponer
- Si no â†’ no reponer

### Costos simulados
- **Quiebre real:** alto impacto operativo
- **Falsa alarma:** costo logÃ­stico innecesario

Se comparan distintos umbrales para elegir el que **minimiza el costo total**, no solo el error del modelo.

---

##  AnÃ¡lisis por tipo de sucursal

El mismo modelo se evalÃºa separando:

- **Sucursales Urbanas**
  - LogÃ­stica rÃ¡pida
  - Mayor tolerancia a riesgo

- **Sucursales TurÃ­sticas**
  - Alta variabilidad de demanda
  - Mayor costo de quiebre
  - PolÃ­tica mÃ¡s conservadora

Este anÃ¡lisis permite **adaptar la estrategia** segÃºn el contexto operativo.

---

##  Resultados principales

- El modelo logra **alta capacidad de detecciÃ³n de quiebres**
- La simulaciÃ³n muestra que:
  - Un umbral de **0.5** minimiza el costo total
  - Las polÃ­ticas deben ajustarse por tipo de sucursal
- El enfoque demuestra cÃ³mo **ML puede apoyar decisiones reales**, no solo generar predicciones

---

##  Requisitos tÃ©cnicos

- Python 3.9+
- pandas
- numpy
- SQLAlchemy
- pyodbc
- scikit-learn

---

##  CÃ³mo ejecutar

1. Asegurar conexiÃ³n a SQL Server (Windows Authentication)
2. Ejecutar el script principal de Python en orden:
   - carga de datos
   - feature engineering
   - entrenamiento
   - simulaciÃ³n
3. Revisar resultados impresos y tablas de resumen

---

##  PrÃ³ximos pasos

- Integrar resultados en **Power BI**
- Ajustar umbrales dinÃ¡micos por sucursal
- Incluir variables externas (clima, eventos)
- Evaluar modelos adicionales (XGBoost, LightGBM)

---

##  Autor

**Willialms Aguilera**  
Proyecto educativo y profesional orientado a Data Analytics & Machine Learning aplicado a negocio.

---

 **Nota final**  
Este mÃ³dulo demuestra un enfoque completo:  
> *desde datos â†’ modelo â†’ decisiÃ³n â†’ impacto operativo*

Eso es exactamente lo que buscan equipos de **data, analytics y supply chain**.

